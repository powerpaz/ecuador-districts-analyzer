<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Mapa dinÃ¡mico â€” Distritos Educativos (EC)</title>

<!-- Leaflet + MarkerCluster -->
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css">
<link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.4.1/dist/MarkerCluster.css">
<link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.4.1/dist/MarkerCluster.Default.css">
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script src="https://unpkg.com/leaflet.markercluster@1.4.1/dist/leaflet.markercluster.js"></script>

<!-- PapaParse para leer CSV en el navegador -->
<script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>

<style>
  *{box-sizing:border-box}
  body{margin:0;background:#0b1b3b;color:#1f2937;font-family:system-ui,-apple-system,Segoe UI,Roboto}
  .wrap{max-width:1200px;margin:0 auto;padding:16px}
  .card{background:#fff;border-radius:16px;padding:14px;box-shadow:0 10px 24px rgba(0,0,0,.14)}
  .header{background:linear-gradient(90deg,#5b7cff,#7a4ad8);color:#fff;border-radius:16px;padding:18px 22px;margin-bottom:12px}
  .header-title{display:flex;align-items:center;gap:14px}
  .header h1{margin:0;font-size:24px;line-height:1}
  .logo{height:56px;object-fit:contain}
  .grid{display:grid;grid-template-columns:300px 1fr;gap:12px}
  #map{height:72vh;width:100%;border-radius:14px}
  .stat{display:flex;justify-content:space-between;background:#f5f7fb;border-radius:12px;padding:10px 12px;margin-bottom:8px}
  .chip{display:inline-block;margin:6px 6px 0 0;padding:8px 12px;border-radius:999px;border:2px solid #e5e7eb;cursor:pointer;font-weight:700;font-size:13px;background:#fff}
  .chip.active{background:linear-gradient(135deg,#5b7cff,#7a4ad8);border-color:#7a4ad8;color:#fff}
  .btn{padding:8px 12px;border-radius:10px;border:2px solid #e5e7eb;background:#fff;cursor:pointer;font-weight:700}
  .loading{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;background:#0006;color:#fff;font-weight:800;z-index:999}
</style>
</head>
<body>
<div id="loading" class="loading">Cargando datosâ€¦</div>

<div class="wrap">
  <div class="header card">
    <div class="header-title">
      <img id="logo" class="logo" alt="Logo" style="display:none">
      <h1>Nuevo Modelo Territorial â€” MINEDEC 2025</h1>
    </div>
    <div id="counter" style="margin-top:8px;opacity:.95"></div>
  </div>

  <div class="grid">
    <div class="card">
      <div class="stat"><div>Registros</div><strong id="nTotal"></strong></div>
      <div style="margin:6px 0 4px;font-weight:800;color:#374151">ðŸ”Ž Filtros por COMPLEMENT</div>
      <div id="chips"></div>
      <div style="margin-top:10px">
        <button id="btnAll" class="btn">Mostrar todos</button>
        <button id="btnProv" class="btn">Provincias: ON</button>
      </div>
      <div style="margin-top:12px;font-size:12px;color:#555">
        <b>Fuentes:</b> data/distritos.csv (obligatorio), data/provincias.geojson (opcional), data/logo.png (opcional)
      </div>
    </div>
    <div class="card"><div id="map"></div></div>
  </div>
</div>

<!-- Tu lÃ³gica -->
<script src="app.js"></script>
</body>
</html>
